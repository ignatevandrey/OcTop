!function(n){var a={type:"html",content:"",url:"",ajax:{},ajax_request:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="arcticmodal-overlay"></div>',css:{backgroundColor:"#000",opacity:.6}},container:{block:void 0,tpl:'<div class="arcticmodal-container"><table class="arcticmodal-container_i"><tr><td class="arcticmodal-container_i2"></td></tr></table></div>'},wrap:void 0,body:void 0,errors:{tpl:'<div class="arcticmodal-error arcticmodal-close"></div>',autoclose_delay:2e3,ajax_unsuccessful_load:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},beforeOpen:n.noop,afterOpen:n.noop,beforeClose:n.noop,afterClose:n.noop,afterLoading:n.noop,afterLoadingOnShow:n.noop,errorLoading:n.noop},l=0,i=n([]),d=function(e,o){var a=!0;return n(e).each(function(){n(o.target).get(0)==n(this).get(0)&&(a=!1),0==n(o.target).closest("HTML",n(this).get(0)).length&&(a=!1)}),a},s={getParentEl:function(e){var o=n(e);return(o.data("arcticmodal")||!!(o=n(e).closest(".arcticmodal-container").data("arcticmodalParentEl")))&&o},transition:function(e,o,a,r){switch(r=null==r?n.noop:r,a.type){case"fade":"show"==o?e.fadeIn(a.speed,r):e.fadeOut(a.speed,r);break;case"none":"show"==o?e.show():e.hide(),r()}},prepare_body:function(e,o){n(".arcticmodal-close",e.body).unbind("click.arcticmodal").bind("click.arcticmodal",function(){return o.arcticmodal("close"),!1})},init_el:function(o,e){var a,r,t,c=o.data("arcticmodal");if(!c){if(l++,(c=e).modalID=l,c.overlay.block=n(c.overlay.tpl),c.overlay.block.css(c.overlay.css),c.container.block=n(c.container.tpl),c.body=n(".arcticmodal-container_i2",c.container.block),e.clone?c.body.html(o.clone(!0)):(o.before('<div id="arcticmodalReserve'+c.modalID+'" style="display: none" />'),c.body.html(o)),s.prepare_body(c,o),c.closeOnOverlayClick&&c.overlay.block.add(c.container.block).click(function(e){d(n(">*",c.body),e)&&o.arcticmodal("close")}),c.container.block.data("arcticmodalParentEl",o),o.data("arcticmodal",c),i=n.merge(i,o),n.proxy(u.show,o)(),"html"==c.type)return o;null!=c.ajax.beforeSend&&(a=c.ajax.beforeSend,delete c.ajax.beforeSend),null!=c.ajax.success&&(r=c.ajax.success,delete c.ajax.success),null!=c.ajax.error&&(t=c.ajax.error,delete c.ajax.error);e=n.extend(!0,{url:c.url,beforeSend:function(){null==a?c.body.html('<div class="arcticmodal-loading" />'):a(c,o)},success:function(e){o.trigger("afterLoading"),c.afterLoading(c,o,e),null==r?c.body.html(e):r(c,o,e),s.prepare_body(c,o),o.trigger("afterLoadingOnShow"),c.afterLoadingOnShow(c,o,e)},error:function(){o.trigger("errorLoading"),c.errorLoading(c,o),null==t?(c.body.html(c.errors.tpl),n(".arcticmodal-error",c.body).html(c.errors.ajax_unsuccessful_load),n(".arcticmodal-close",c.body).click(function(){return o.arcticmodal("close"),!1}),c.errors.autoclose_delay&&setTimeout(function(){o.arcticmodal("close")},c.errors.autoclose_delay)):t(c,o)}},c.ajax);c.ajax_request=n.ajax(e),o.data("arcticmodal",c)}},init:function(e){if(e=n.extend(!0,{},a,e),!n.isFunction(this))return this.each(function(){s.init_el(n(this),n.extend(!0,{},e))});if(null!=e)if(""!=e.type)switch(e.type){case"html":if(""==e.content)return void n.error('jquery.arcticmodal: Don\'t set parameter "content"');var o=e.content;return e.content="",s.init_el(n(o),e);case"ajax":return""==e.url?void n.error('jquery.arcticmodal: Don\'t set parameter "url"'):s.init_el(n("<div />"),e)}else n.error('jquery.arcticmodal: Don\'t set parameter "type"');else n.error("jquery.arcticmodal: Uncorrect parameters")}},u={show:function(){var e=s.getParentEl(this);if(!1!==e){var o,a,r=e.data("arcticmodal");return r.overlay.block.hide(),r.container.block.hide(),n("BODY").append(r.overlay.block),n("BODY").append(r.container.block),r.beforeOpen(r,e),e.trigger("beforeOpen"),"hidden"!=r.wrap.css("overflow")&&(r.wrap.data("arcticmodalOverflow",r.wrap.css("overflow")),o=r.wrap.outerWidth(!0),r.wrap.css("overflow","hidden"),(a=r.wrap.outerWidth(!0))!=o&&r.wrap.css("marginRight",a-o+"px")),i.not(e).each(function(){n(this).data("arcticmodal").overlay.block.hide()}),s.transition(r.overlay.block,"show",1<i.length?{type:"none"}:r.openEffect),s.transition(r.container.block,"show",1<i.length?{type:"none"}:r.openEffect,function(){r.afterOpen(r,e),e.trigger("afterOpen")}),e}n.error("jquery.arcticmodal: Uncorrect call")},close:function(){if(!n.isFunction(this))return this.each(function(){var e,o=s.getParentEl(this);!1!==o?!1!==(e=o.data("arcticmodal")).beforeClose(e,o)&&(o.trigger("beforeClose"),i.not(o).last().each(function(){n(this).data("arcticmodal").overlay.block.show()}),s.transition(e.overlay.block,"hide",1<i.length?{type:"none"}:e.closeEffect),s.transition(e.container.block,"hide",1<i.length?{type:"none"}:e.closeEffect,function(){e.afterClose(e,o),o.trigger("afterClose"),e.clone||n("#arcticmodalReserve"+e.modalID).replaceWith(e.body.find(">*")),e.overlay.block.remove(),e.container.block.remove(),o.data("arcticmodal",null),n(".arcticmodal-container").length||(e.wrap.data("arcticmodalOverflow")&&e.wrap.css("overflow",e.wrap.data("arcticmodalOverflow")),e.wrap.css("marginRight",0))}),"ajax"==e.type&&e.ajax_request.abort(),i=i.not(o)):n.error("jquery.arcticmodal: Uncorrect call")});i.each(function(){n(this).arcticmodal("close")})},setDefault:function(e){n.extend(!0,a,e)}};n(function(){a.wrap=n(document.all&&!document.querySelector?"html":"body")}),n(document).bind("keyup.arcticmodal",function(e){var o=i.last();o.length&&o.data("arcticmodal").closeOnEsc&&27===e.keyCode&&o.arcticmodal("close")}),n.arcticmodal=n.fn.arcticmodal=function(e){return u[e]?u[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void n.error("jquery.arcticmodal: Method "+e+" does not exist"):s.init.apply(this,arguments)}}(jQuery);